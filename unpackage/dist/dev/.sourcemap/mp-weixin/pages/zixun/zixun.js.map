{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/万青尧/Documents/HBuilderProjects/robot/pages/zixun/zixun.vue?b3ff","webpack:///C:/Users/万青尧/Documents/HBuilderProjects/robot/pages/zixun/zixun.vue?16d3","webpack:///C:/Users/万青尧/Documents/HBuilderProjects/robot/pages/zixun/zixun.vue?332b","webpack:///C:/Users/万青尧/Documents/HBuilderProjects/robot/pages/zixun/zixun.vue?9f9b","uni-app:///pages/zixun/zixun.vue","webpack:///C:/Users/万青尧/Documents/HBuilderProjects/robot/pages/zixun/zixun.vue?9372","webpack:///C:/Users/万青尧/Documents/HBuilderProjects/robot/pages/zixun/zixun.vue?89fa"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":"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3FA;AA4FA;AACA,YA7FA,oBA6FA,CA7FA,EA6FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA,KA3GA;AA4GA;AACA,YA7GA,oBA6GA,CA7GA,EA6GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BARA,CAQA;AACA,KAtHA;AAuHA;AACA,aAxHA,qBAwHA,CAxHA,EAwHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBADA;AAEA,6BAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDADA;AAEA,kCAFA;AAGA,sBAHA;AAIA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBADA;AAEA,2DAFA;AAGA,wBAHA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEADA;AAEA;AACA,gCADA,EAFA;;AAKA,6BALA;AAMA,gCANA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDADA;AAEA,qDAHA;AAIA;AACA;AACA,iCADA;AAEA;AACA,sCADA;AAEA;AACA,mEAHA,EAFA;;AAOA,gCAPA;;AASA;AACA;AACA;AACA,qBAjBA,MAiBA;AACA;AACA,iCADA;AAEA;AACA,sCADA;AAEA;AACA,+EAHA,EAFA;;AAOA,gCAPA;;AASA;AACA;AACA;AACA;AACA,mBAtCA,MAsCA;AACA;AACA;AACA,+BADA;AAEA;AACA,oCADA;AAEA;AACA,kEAHA,EAFA;;AAOA,6BAPA;AAQA,oDARA;;AAUA;AACA,iBA3DA;AA4DA;AACA;AACA;AACA;AACA;AACA,6BADA;AAEA;AACA,8DAHA;AAIA,2BAJA;AAKA,kDALA;;AAOA;AACA,iBAxEA;;AA0EA,aA3EA,MA2EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eArBA,MAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CADA;AAEA,iDAHA;AAIA;AACA;AACA,0DADA;AAEA;AACA,iDADA;AAEA,gCAFA;AAGA,wCAHA,EAFA;;AAOA;AACA,yEADA,EAPA;;AAUA,kCAVA;AAWA;AACA;AACA;AACA;AACA;AACA,mCADA;AAEA,uEAFA;AAGA,kCAHA;;AAKA;AACA;AACA,uBATA,MASA;AACA;AACA;AACA,gEADA;AAEA;AACA,uDADA;AAEA,sCAFA;AAGA,8CAHA,EAFA;;AAOA,wCAPA;AAQA;AACA;AACA,+DAFA,EARA;;AAYA;AACA;AACA,2BAdA;;AAgBA;AACA;AACA;AACA,0EAFA;AAGA;AACA,4CADA,EAHA;;AAMA;AACA;AACA;AACA,iFAFA;AAGA;AACA,gDADA;AAEA;AACA;AACA;AACA;AACA,wCADA,GACA,CAFA,CADA,CAHA,EAHA;;;;AAaA;AACA;AACA,6CADA;AAEA;AACA,kDADA;AAEA;AACA;AACA,iDADA;AAEA,0FALA,EAFA;;AASA,4CATA;;AAWA;AACA,iCA1BA;AA2BA;AACA;AACA,iCA7BA;;AA+BA,6BAtCA;;;AAyCA;AACA;AACA,gDAFA;AAGA;AACA,mEADA;AAEA,mCAFA,mBAEA,GAFA,EAEA;AACA;AACA,6BAJA;;AAMA,yBAnDA,EAmDA,IAnDA;AAoDA;AACA,qBA7FA;AA8FA;AACA;AACA,qBAhGA;;AAkGA;AACA;AACA;AACA,WAvOA;;AAyOA,OArPA,MAqPA;AACA;AACA;AACA;AACA;AACA,KAtXA;;AAwXA;AACA,SAzXA,iBAyXA,EAzXA,EAyXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAhYA;AAiYA;AACA,WAlYA,mBAkYA,CAlYA,EAkYA,CAlYA,EAkYA;AACA;AACA,mBADA;AAEA,gCAFA;;;AAKA;;AAEA;;AAEA;AACA,KA7YA;AA8YA;AACA,SA/YA,mBA+YA;AACA;AACA;AACA;AACA;AACA;AACA,cADA,CACA,MADA;AAEA,0BAFA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAFA,MAEA;AACA;AACA;AACA;AACA;AACA,SAnBA;AAoBA,YApBA;AAqBA,OAvBA,EAuBA,GAvBA;AAwBA,KA1aA;AA2aA;AACA,UA5aA,kBA4aA,EA5aA,EA4aA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBADA;AAEA;AACA,sBADA;AAEA;AACA,mDAHA,EAFA;;AAOA,gBAPA;;AASA;AACA;AACA,KA5cA;AA6cA,WA7cA,qBA6cA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA1dA;;AA4dA,SA5dA,iBA4dA,CA5dA,EA4dA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DADA;AAEA;AACA,uBADA,EAFA;;AAKA,uBALA;AAMA,0BANA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBADA;AAEA;AACA,8BADA;AAEA,6DAFA,EAFA;;AAMA,wBANA;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CADA;AAEA,+CAHA;AAIA;AACA;AACA,2BADA;AAEA;AACA,gCADA;AAEA;AACA,6DAHA,EAFA;;AAOA,0BAPA;;AASA;AACA;AACA;AACA,eAjBA,MAiBA;AACA;AACA,2BADA;AAEA;AACA,gCADA;AAEA;AACA,yEAHA,EAFA;;AAOA,0BAPA;;AASA;AACA;AACA;AACA;AACA,aAjDA,MAiDA;AACA;AACA;AACA,yBADA;AAEA;AACA,8BADA;AAEA;AACA,4DAHA,EAFA;;AAOA,uBAPA;AAQA,8CARA;;AAUA;AACA;AACA,WAvEA;AAwEA;AACA;AACA;AACA;AACA;AACA,uBADA;AAEA;AACA,wDAHA;AAIA,qBAJA;AAKA,4CALA;;AAOA;AACA,WApFA;;AAsFA,OAxFA,MAwFA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA,kDADA;AAEA;AACA,uCADA;AAEA,qBAFA;AAGA,gCAHA,EAFA;;AAOA;AACA,iEADA,EAPA;;AAUA,0BAVA;AAWA;AACA;AACA;AACA;AACA;AACA,2BADA;AAEA,+DAFA;AAGA,0BAHA;;AAKA;AACA;AACA,eATA,MASA;AACA;AACA;AACA;AACA,wDADA;AAEA;AACA,+CADA;AAEA,2BAFA;AAGA,sCAHA,EAFA;;AAOA,gCAPA;AAQA;AACA,uEADA,EARA;;AAWA;AACA;AACA,mBAbA;;AAeA;AACA;AACA,uEADA;AAEA;AACA,oCADA,EAFA;;AAKA;AACA;AACA;AACA,yEAFA;AAGA;AACA,wCADA;AAEA;AACA;AACA,2DADA,CAHA,EAHA;;;AAUA;AACA;AACA,qCADA;AAEA;AACA,0CADA;AAEA;AACA;AACA,yCADA;AAEA,kFALA,EAFA;;AASA,oCATA;;AAWA;AACA,yBAvBA;AAwBA;AACA;AACA,yBA1BA;;AA4BA,qBAlCA;;;AAqCA;AACA;AACA;AACA;AACA,sDADA;AAEA,2BAFA,mBAEA,GAFA,EAEA;AACA;AACA,qBAJA;;AAMA,iBA/CA,EA+CA,IA/CA;AAgDA;AACA,aAzFA;AA0FA;AACA;AACA,aA5FA;;AA8FA;AACA;AACA,KA9pBA;AA+pBA;AACA,SAhqBA,mBAgqBA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA,KAvqBA;AAwqBA,WAxqBA,qBAwqBA;AACA;AACA,KA1qBA;AA2qBA;AACA,WA5qBA,mBA4qBA,CA5qBA,EA4qBA,CA5qBA,EA4qBA;AACA;AACA,mBADA;AAEA,8BAFA;;;AAKA;;AAEA;;AAEA;AACA,KAvrBA,EA3GA,E;;;;;;;;;;;;;AC1OA;AAAA;AAAA;AAAA;AAAosD,CAAgB,uhDAAG,EAAC,C;;;;;;;;;;;ACAxtD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/zixun/zixun.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/zixun/zixun.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./zixun.vue?vue&type=template&id=86188f68&\"\nvar renderjs\nimport script from \"./zixun.vue?vue&type=script&lang=js&\"\nexport * from \"./zixun.vue?vue&type=script&lang=js&\"\nimport style0 from \"./zixun.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/zixun/zixun.vue\"\nexport default component.exports","export * from \"-!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./zixun.vue?vue&type=template&id=86188f68&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./zixun.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./zixun.vue?vue&type=script&lang=js&\"","<<template>\r\n\t<view>\r\n\t\t<!-- 空盒子用来防止消息过少时 拉起键盘会遮盖消息 -->\r\n\t\t<view :animation=\"anData\" style=\"height:0;\"></view>\r\n\t\t<!-- 消息体 -->\r\n\t\t<scroll-view\r\n\t\t\tscroll-with-animation\r\n\t\t\tscroll-y=\"true\"\r\n\t\t\t@touchmove=\"hideKey\"\r\n\t\t\tstyle=\"width: 750rpx;\"\r\n\t\t\t:style=\"{ height: srcollHeight }\"\r\n\t\t\t:scroll-top=\"go\"\r\n\t\t>\r\n\t\t\t<!-- 用来获取消息体高度 -->\r\n\t\t\t<view id=\"okk\" scroll-with-animation>\r\n\t\t\t\t<!-- 消息 -->\r\n\t\t\t\t<view class=\"flex-column-start\" v-for=\"(x, i) in msgList\" :key=\"i\">\r\n\t\t\t\t\t<!-- 用户消息 头像可选加入-->\r\n\t\t\t\t\t<view\r\n\t\t\t\t\t\tv-if=\"x.my\"\r\n\t\t\t\t\t\tclass=\"flex justify-end padding-right one-show  align-start  padding-top\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<!-- \t<image v-if=\"!x.my\" class=\"chat-img\" src=\"../../static/...\" mode=\"aspectFill\" ></image> -->\r\n\t\t\t\t\t\t<view class=\"flex justify-end\" style=\"width: 400rpx;\" @longpress=\"chehui\">\r\n\t\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\t\tv-if=\"x.msg.type == 'text'\"\r\n\t\t\t\t\t\t\t\tclass=\"margin-left padding-chat bg-cyan\"\r\n\t\t\t\t\t\t\t\tstyle=\"border-radius: 35rpx;\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<text style=\"word-break: break-all;\">{{ x.msg.content }}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\t\tv-if=\"x.msg.type == 'voice'\"\r\n\t\t\t\t\t\t\t\t@tap=\"playVoice(x.msg)\"\r\n\t\t\t\t\t\t\t\tclass=\"margin-left padding-chat bg-cyan\"\r\n\t\t\t\t\t\t\t\tstyle=\"border-radius: 35rpx;\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<view class=\"cuIcon-notification\">\r\n\t\t\t\t\t\t\t\t\t<text space=\"emsp\" style=\"word-break: break-all;\">\r\n\t\t\t\t\t\t\t\t\t\t{{ x.msg.content.length }}\r\n\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- <image class=\"chat-img margin-left\" src=\"../../static/...\" mode=\"aspectFill\" ></image> -->\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 机器人消息 -->\r\n\t\t\t\t\t<view v-if=\"!x.my\" class=\"flex-row-start margin-left margin-top one-show\">\r\n\t\t\t\t\t\t<view class=\"chat-img flex-row-center\">\r\n\t\t\t\t\t\t\t<image\r\n\t\t\t\t\t\t\t\tstyle=\"height: 75rpx;width: 75rpx;\"\r\n\t\t\t\t\t\t\t\tsrc=\"../../static/image/robt.png\"\r\n\t\t\t\t\t\t\t\tmode=\"aspectFit\"\r\n\t\t\t\t\t\t\t></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"flex\" style=\"width: 500rpx;\">\r\n\t\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\t\tclass=\"margin-left padding-chat flex-column-start\"\r\n\t\t\t\t\t\t\t\tstyle=\"border-radius: 35rpx;background-color: #f9f9f9;\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<text style=\"word-break: break-all;\">{{ x.msg.content }}</text>\r\n\t\t\t\t\t\t\t\t<!-- 消息模板 =>初次问候 -->\r\n\t\t\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\t\t\tclass=\"flex-column-start\"\r\n\t\t\t\t\t\t\t\t\tv-if=\"x.type == 1\"\r\n\t\t\t\t\t\t\t\t\tstyle=\"color: #2fa39b;\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\t\tstyle=\"color: #838383;font-size: 22rpx;margin-top: 15rpx;\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t您可以点击下方的快速功能按钮:\r\n\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\t\t@click=\"answer(index)\"\r\n\t\t\t\t\t\t\t\t\t\tstyle=\"margin-top: 30rpx;\"\r\n\t\t\t\t\t\t\t\t\t\tv-for=\"(item, index) in x.questionList\"\r\n\t\t\t\t\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{{ item }}\r\n\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t\t<view class=\"flex-row-start  padding-top-sm\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"my-neirong-sm\">没有您要的?</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"padding-left\" style=\"color: #007AFF;\">\r\n\t\t\t\t\t\t\t\t\t\t\t换一批\r\n\t\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<!-- 消息模板 =>多个答案 -->\r\n\t\t\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\t\t\tclass=\"flex-column-start\"\r\n\t\t\t\t\t\t\t\t\tv-if=\"x.type == 2\"\r\n\t\t\t\t\t\t\t\t\tstyle=\"color: #2fa39b;\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\t\tstyle=\"color: #838383;font-size: 22rpx;margin-top: 15rpx;\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t猜你想问:\r\n\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t\t<!-- 连接服务器应该用item.id -->\r\n\t\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\t\t@click=\"answer(index)\"\r\n\t\t\t\t\t\t\t\t\t\tstyle=\"margin-top: 30rpx;\"\r\n\t\t\t\t\t\t\t\t\t\tv-for=\"(item, index) in x.questionList\"\r\n\t\t\t\t\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{{ item }}\r\n\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<!-- 消息模板 => 无法回答-->\r\n\t\t\t\t\t\t\t\t<view class=\"flex-column-start\" v-if=\"x.type == 0\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"padding-top-sm\" style=\"color: #2fa39b;\">\r\n\t\t\t\t\t\t\t\t\t\t律百通暂时不能回答您的问题呢。\r\n\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\t\tstyle=\"color: #838383;font-size: 22rpx;margin-top: 15rpx;\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t下面是一些常见问题,您可以点击对应的文字快速获取答案:\r\n\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\t\t@click=\"answer(index)\"\r\n\t\t\t\t\t\t\t\t\t\tstyle=\"margin-top: 30rpx;color: #2fa39b;\"\r\n\t\t\t\t\t\t\t\t\t\tv-for=\"(item, index) in x.questionList\"\r\n\t\t\t\t\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{{ item }}\r\n\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t\t<view class=\"flex-row-start  padding-top-sm\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"my-neirong-sm\">没有你要的答案?</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"padding-left\" style=\"color: #1396c5;\">\r\n\t\t\t\t\t\t\t\t\t\t\t换一批\r\n\t\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- loading是显示 -->\r\n\t\t\t\t<view v-show=\"msgLoad\" class=\"flex-row-start margin-left margin-top\">\r\n\t\t\t\t\t<view class=\"chat-img flex-row-center\">\r\n\t\t\t\t\t\t<image\r\n\t\t\t\t\t\t\tstyle=\"height: 75rpx;width: 75rpx;\"\r\n\t\t\t\t\t\t\tsrc=\"../../static/image/robt.png\"\r\n\t\t\t\t\t\t\tmode=\"aspectFit\"\r\n\t\t\t\t\t\t></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"flex\" style=\"width: 500rpx;\">\r\n\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\tclass=\"margin-left padding-chat flex-column-start\"\r\n\t\t\t\t\t\t\tstyle=\"border-radius: 35rpx;background-color: #f9f9f9;\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\t\tclass=\"cuIcon-loading turn-load\"\r\n\t\t\t\t\t\t\t\tstyle=\"font-size: 35rpx;color: #3e9982;\"\r\n\t\t\t\t\t\t\t></view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 防止消息底部被遮 -->\r\n\t\t\t\t<view style=\"height: 120rpx;\"></view>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\r\n\t\t<!-- 底部导航栏 -->\r\n\t\t<view\r\n\t\t\tclass=\"flex-column-center\"\r\n\t\t\tstyle=\"position: fixed;bottom: -180px;\"\r\n\t\t\t:animation=\"animationData\"\r\n\t\t>\r\n\t\t\t<view class=\"bottom-dh-char flex-row-around\" style=\"font-size: 70rpx;\">\r\n\t\t\t\t<!-- vue无法使用软键盘\"发送\" -->\r\n\t\t\t\t<input\r\n\t\t\t\t\tv-model=\"msg\"\r\n\t\t\t\t\tclass=\"dh-input\"\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tstyle=\"background-color: #f0f0f0;\"\r\n\t\t\t\t\t@confirm=\"sendMsg\"\r\n\t\t\t\t\tconfirm-type=\"search\"\r\n\t\t\t\t\tplaceholder-class=\"my-neirong-sm\"\r\n\t\t\t\t\tplaceholder=\"用一句简短的话描述您的问题\"\r\n\t\t\t\t/>\r\n\t\t\t\t<view\r\n\t\t\t\t\t@click=\"sendMsg\"\r\n\t\t\t\t\tclass=\"cu-tag bg-cyan round\"\r\n\t\t\t\t\tstyle=\"font-size: 40rpx; padding-top: 10rpx;padding-bottom: 10rpx;\"\r\n\t\t\t\t>\r\n\t\t\t\t\t发送\r\n\t\t\t\t</view>\r\n\t\t\t\t<text\r\n\t\t\t\t\tclass=\"cuIcon-sound\"\r\n\t\t\t\t\t@touchstart=\"voiceBegin\"\r\n\t\t\t\t\t@touchmove.stop.prevent=\"voiceIng\"\r\n\t\t\t\t\t@touchend=\"voiceEnd\"\r\n\t\t\t\t\t@touchcancel=\"voiceCancel\"\r\n\t\t\t\t></text>\r\n\t\t\t\t<!-- <text @click=\"ckAdd\" class=\"cuIcon-roundaddfill text-brown\"></text> -->\r\n\t\t\t</view>\r\n\t\t\t<!-- 附加栏(自定义) -->\r\n\t\t\t<view class=\"box-normal flex-row-around flex-wrap\">\r\n\t\t\t\t<view class=\"tb-text\">\r\n\t\t\t\t\t<text>联系客服</text>\r\n\t\t\t\t\t<view class=\"cuIcon-service\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"tb-text\">\r\n\t\t\t\t\t<text>附近的机器人</text>\r\n\t\t\t\t\t<view class=\"cuIcon-locationfill\" @tap=\"ckmap\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 录音UI效果 -->\r\n\t\t<view class=\"record\" :class=\"recording ? '' : 'hidden'\">\r\n\t\t\t<view class=\"ing\" :class=\"willStop ? 'hidden' : ''\">\r\n\t\t\t\t<view class=\"icon luyin2\"></view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"cancel\" :class=\"willStop ? '' : 'hidden'\">\r\n\t\t\t\t<view class=\"icon chehui\"></view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"tis\" :class=\"willStop ? 'change' : ''\">{{ recordTis }}</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nconst recorderManager = uni.getRecorderManager()\r\nconst innerAudioContext = uni.createInnerAudioContext()\r\n\r\ninnerAudioContext.autoplay = true\r\n// rpx和px的比率\r\nvar l\r\n// 可用窗口高度\r\nvar wh\r\n// 顶部空盒子的高度\r\nvar mgUpHeight\r\nexport default {\r\n\tonLoad() {\r\n\t\t// 如果需要缓存消息缓存msgList即可\r\n\t\t// 监听键盘拉起\r\n\t\t// 因为无法控制键盘拉起的速度,所以这里尽量以慢速处理\r\n\t\tuni.onKeyboardHeightChange(res => {\r\n\t\t\tconst query = uni.createSelectorQuery()\r\n\t\t\tquery\r\n\t\t\t\t.select('#okk')\r\n\t\t\t\t.boundingClientRect(data => {\r\n\t\t\t\t\t// 若消息体没有超过2倍的键盘则向下移动差值,防止遮住消息体\r\n\t\t\t\t\tvar up = res.height * 2 - data.height - l * 110\r\n\t\t\t\t\tconsole.log(up)\r\n\t\t\t\t\tif (up > 0) {\r\n\t\t\t\t\t\t// 动态改变空盒子高度\r\n\t\t\t\t\t\tthis.msgMove(up, 300)\r\n\t\t\t\t\t\t// 记录改变的值,若不收回键盘且发送了消息用来防止消息过多被遮盖\r\n\t\t\t\t\t\tmgUpHeight = up\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 收回\r\n\t\t\t\t\tif (res.height == 0) {\r\n\t\t\t\t\t\tthis.msgMove(0, 0)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.exec()\r\n\t\t})\r\n\t\tvar query = uni.getSystemInfoSync()\r\n\r\n\t\tl = query.screenWidth / 750\r\n\t\twh = query.windowHeight\r\n\t\tthis.srcollHeight = query.windowHeight + 'px'\r\n\r\n\t\trecorderManager.onStop(function(res) {\r\n\t\t\tconsole.log('recorder stop' + JSON.stringify(res))\r\n\t\t\tself.voicePath = res.tempFilePath\r\n\t\t})\r\n\t\tthis.AUDIO.onEnded(res => {\r\n\t\t\tthis.playMsgid = null\r\n\t\t})\r\n\t\t// #ifndef H5\r\n\t\t//录音开始事件\r\n\t\tthis.RECORDER.onStart(e => {\r\n\t\t\tthis.recordBegin(e)\r\n\t\t})\r\n\t\t//录音结束事件\r\n\t\tthis.RECORDER.onStop(e => {\r\n\t\t\tthis.recordEnd(e)\r\n\t\t})\r\n\t\t// #endif\r\n\t},\r\n\tonUnload() {\r\n\t\tconsole.log('end')\r\n\t\tuni.request({\r\n\t\t\turl: 'http://http://114.116.12.217/reset',\r\n\t\t\tsuccess(res) {\r\n\t\t\t\tconsole.log(res)\r\n\t\t\t},\r\n\t\t})\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tmsgLoad: false,\r\n\t\t\tanData: {},\r\n\t\t\tanimationData: {},\r\n\t\t\tshowTow: false,\r\n\t\t\t// 消息体,定义机器人初次的消息(或者自定义出现时机)\r\n\t\t\t// my->谁发的消息 msg->消息文本 type->客服消息模板类型 questionList->快速获取问题答案的问题列表\r\n\t\t\tmsgList: [\r\n\t\t\t\t{\r\n\t\t\t\t\tmy: false,\r\n\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\tcontent:\r\n\t\t\t\t\t\t\t'您好，欢迎使用律百通,您可以用一段话描述您遇到的法律问题。我们将识别您问题的类别然后继续咨询。\\n',\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttype: 1,\r\n\t\t\t\t\tquestionList: ['关于婚姻家庭', '关于民间借贷', '关于消费者权益'],\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\tmsg: '',\r\n\t\t\tgo: 0,\r\n\t\t\tsrcollHeight: 0,\r\n\t\t\tisclassify: 0,\r\n\t\t\tclassify_text: '',\r\n\t\t\tisasking: 0,\r\n\t\t\tqid: 0,\r\n\r\n\t\t\t//录音相关参数\r\n\t\t\t// #ifndef H5\r\n\t\t\t//H5不能录音\r\n\t\t\tRECORDER: uni.getRecorderManager(),\r\n\t\t\t// #endif\r\n\t\t\tisVoice: true,\r\n\t\t\tvoiceTis: '按住 说话',\r\n\t\t\trecordTis: '手指上滑 取消发送',\r\n\t\t\trecording: false,\r\n\t\t\twillStop: false,\r\n\t\t\tinitPoint: { identifier: 0, Y: 0 },\r\n\t\t\trecordTimer: null,\r\n\t\t\trecordLength: 0,\r\n\t\t\tvoicePath: '',\r\n\t\t\t//播放语音相关参数\r\n\t\t\tAUDIO: uni.createInnerAudioContext(),\r\n\t\t\tplayMsgid: null,\r\n\t\t\tVoiceTimer: null,\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tckmap() {\r\n\t\t\tconsole.log('地图')\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: '../map/map',\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tchehui() {\r\n\t\t\t// uni.request({\r\n\t\t\t// \turl:'http://47.94.14.42:5002/reset',\r\n\t\t\t// \tsuccess(res) {\r\n\t\t\t// \t\tconsole.log(res)\r\n\t\t\t// \t}\r\n\t\t\t// })\r\n\t\t\tuni.request({\r\n\t\t\t\turl: 'http://http://114.116.12.217:8080/demo_war/GetBooks',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tuser: 'myuser',\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl: 'http://http://114.116.12.217:8080/demo_war/getfilename',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tuser: 'myuser',\r\n\t\t\t\t\t\t\ttime: res.data.books[String(res.data.books.length - 1)],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: e => {\r\n\t\t\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\t\t\tthis.msgList.push({\r\n\t\t\t\t\t\t\t\tmy: false,\r\n\t\t\t\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t\t\tcontent:\r\n\t\t\t\t\t\t\t\t\t\t'感谢您的回答，律百通已经为您后台生成法律咨询意见书！您本次咨询的意见书密匙是' +\r\n\t\t\t\t\t\t\t\t\t\te.data.code +\r\n\t\t\t\t\t\t\t\t\t\t',您可点击首页的下载意见书按钮后扫码下载。\\n\\n您可再次输入一个问题，律百通会再次对您的问题分析。',\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\ttype: -1,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t;(this.classify_text = ''), (this.isclassify = 0)\r\n\t\t\t\t\t\t\tthis.msgGo()\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: e => {\r\n\t\t\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t})\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t\tconsole.log('撤回菜单')\r\n\t\t\tconsole.log(this.msgList)\r\n\t\t},\r\n\r\n\t\t// 播放语音\r\n\t\tplayVoice(msg) {\r\n\t\t\tconsole.log(msg)\r\n\t\t\t// this.playMsgid=msg.id;\r\n\t\t\tthis.AUDIO.src = msg.content.url\r\n\t\t\tthis.$nextTick(function() {\r\n\t\t\t\tthis.AUDIO.play()\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 录音开始\r\n\t\tvoiceBegin(e) {\r\n\t\t\tconsole.log('voiceBegin')\r\n\t\t\tif (e.touches.length > 1) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tthis.initPoint.Y = e.touches[0].clientY\r\n\t\t\tthis.initPoint.identifier = e.touches[0].identifier\r\n\t\t\tthis.RECORDER.start({ format: 'wav', sampleRate: 16000 }) //录音开始,\r\n\t\t},\r\n\t\t//录音开始UI效果\r\n\t\trecordBegin(e) {\r\n\t\t\tconsole.log('recordBegin')\r\n\t\t\tthis.recording = true\r\n\t\t\tthis.voiceTis = '松开 结束'\r\n\t\t\tthis.recordLength = 0\r\n\t\t\tthis.recordTimer = setInterval(() => {\r\n\t\t\t\tthis.recordLength++\r\n\t\t\t}, 1000)\r\n\t\t},\r\n\t\t// 录音被打断\r\n\t\tvoiceCancel() {\r\n\t\t\tconsole.log('voiceCancel')\r\n\t\t\tthis.recording = false\r\n\t\t\tthis.voiceTis = '按住 说话'\r\n\t\t\tthis.recordTis = '手指上滑 取消发送'\r\n\t\t\tthis.willStop = true //不发送录音\r\n\t\t\tthis.RECORDER.stop() //录音结束\r\n\t\t},\r\n\t\t// 录音中(判断是否触发上滑取消发送)\r\n\t\tvoiceIng(e) {\r\n\t\t\tconsole.log('voiceIng')\r\n\t\t\tif (!this.recording) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tlet touche = e.touches[0]\r\n\t\t\t//上滑一个导航栏的高度触发上滑取消发送\r\n\t\t\tif (this.initPoint.Y - touche.clientY >= uni.upx2px(100)) {\r\n\t\t\t\tthis.willStop = true\r\n\t\t\t\tthis.recordTis = '松开手指 取消发送'\r\n\t\t\t} else {\r\n\t\t\t\tthis.willStop = false\r\n\t\t\t\tthis.recordTis = '手指上滑 取消发送'\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 结束录音\r\n\t\tvoiceEnd(e) {\r\n\t\t\tconsole.log('voiceEnd')\r\n\t\t\tif (!this.recording) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tthis.recording = false\r\n\t\t\tthis.voiceTis = '按住 说话'\r\n\t\t\tthis.recordTis = '手指上滑 取消发送'\r\n\t\t\tthis.RECORDER.stop() //录音结束\r\n\t\t},\r\n\t\t//录音结束(回调文件)\r\n\t\trecordEnd(e) {\r\n\t\t\tconsole.log('recordEnd')\r\n\t\t\tconsole.log(e)\r\n\t\t\tclearInterval(this.recordTimer)\r\n\t\t\tif (!this.willStop) {\r\n\t\t\t\tconsole.log('e: ' + JSON.stringify(e))\r\n\t\t\t\tlet msg = {\r\n\t\t\t\t\tlength: 0,\r\n\t\t\t\t\turl: e.tempFilePath,\r\n\t\t\t\t}\r\n\t\t\t\tlet min = parseInt(this.recordLength / 60)\r\n\t\t\t\tlet sec = this.recordLength % 60\r\n\t\t\t\tmin = min < 10 ? '0' + min : min\r\n\t\t\t\tsec = sec < 10 ? '0' + sec : sec\r\n\t\t\t\tmsg.length = min + ':' + sec\r\n\t\t\t\tthis.msgList.push({ msg: { type: 'voice', content: msg }, my: true })\r\n\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\turl: 'http://121.36.67.250:1700/api/asr',\r\n\t\t\t\t\tfilePath: e.tempFilePath,\r\n\t\t\t\t\tname: 'file',\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tvar text\r\n\r\n\t\t\t\t\t\tconsole.log(JSON.parse(res.data).err_no)\r\n\t\t\t\t\t\t// console.log(res.data[1])\r\n\t\t\t\t\t\t// console.log(res.data[5])\r\n\t\t\t\t\t\tif (JSON.parse(res.data).err_no == 3307) {\r\n\t\t\t\t\t\t\tthis.msgList.push({\r\n\t\t\t\t\t\t\t\tmy: false,\r\n\t\t\t\t\t\t\t\tmsg: { type: 'text', content: '请大大声一点点哟！' },\r\n\t\t\t\t\t\t\t\ttype: -1,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthis.msgLoad = false\r\n\t\t\t\t\t\t\tthis.msgGo()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttext = JSON.parse(res.data).result[0]\r\n\t\t\t\t\t\tconsole.log(String(text))\r\n\t\t\t\t\t\t//调用分类\r\n\t\t\t\t\t\tif (this.isclassify == 0) {\r\n\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\turl: 'http://121.36.67.250:1700/api/textClassify2',\r\n\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\tquestion: text,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\tif (res.statusCode == 200) {\r\n\t\t\t\t\t\t\t\t\t\tthis.msgLoad = false\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(res.data.data.kind[0][0])\r\n\t\t\t\t\t\t\t\t\t\tthis.classify_text = res.data.data.kind[0][0]\r\n\t\t\t\t\t\t\t\t\t\tif (this.classify_text == '离婚') {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.classify_text = '婚姻家庭'\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\tthis.classify_text == '婚姻家庭' ||\r\n\t\t\t\t\t\t\t\t\t\t\tthis.classify_text == '民间借贷' ||\r\n\t\t\t\t\t\t\t\t\t\t\tthis.classify_text == '消费者权益保护'\r\n\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.msgList.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tmy: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontent:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'接下来律百通会问您一些问题，请耐心回答哟！在您回复后，我们将开始正式咨询流程。',\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype: -1,\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\tthis.msgLoad = false\r\n\t\t\t\t\t\t\t\t\t\t\tthis.msgGo()\r\n\t\t\t\t\t\t\t\t\t\t\tthis.isclassify = 1\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.msgList.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tmy: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontent:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'您的问题律百通暂时回答不了呢，现在律百通只明白\\n婚姻家庭、民间借贷、消费者权益保护三个类别的问题呢。',\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype: -1,\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\tthis.msgLoad = false\r\n\t\t\t\t\t\t\t\t\t\t\tthis.msgGo()\r\n\t\t\t\t\t\t\t\t\t\t\tthis.isclassify = 0\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tthis.msgLoad = false\r\n\t\t\t\t\t\t\t\t\t\tthis.msgList.push({\r\n\t\t\t\t\t\t\t\t\t\t\tmy: false,\r\n\t\t\t\t\t\t\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t\t\t\t\t\tcontent:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'律百通还在学习中,没能明白您的问题,您点击下方提交反馈与问题,我们会尽快人工处理',\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\ttype: 0,\r\n\t\t\t\t\t\t\t\t\t\t\tquestionList: ['联系我们', '人工客服'],\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\t\t\t\tconsole.log('fail')\r\n\t\t\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\t\t\tthis.msgLoad = false\r\n\t\t\t\t\t\t\t\t\tthis.msgList.push({\r\n\t\t\t\t\t\t\t\t\t\tmy: false,\r\n\t\t\t\t\t\t\t\t\t\tmsg:\r\n\t\t\t\t\t\t\t\t\t\t\t'律百通还在学习中,没能明白您的问题,您点击下方提交反馈与问题,我们会尽快人工处理',\r\n\t\t\t\t\t\t\t\t\t\ttype: 0,\r\n\t\t\t\t\t\t\t\t\t\tquestionList: ['联系我们', '人工客服'],\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\tthis.msgGo()\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (this.isasking == 1132) {\r\n\t\t\t\t\t\t\t\t// uni.request({\r\n\t\t\t\t\t\t\t\t// \t\turl:'http://47.94.14.42:5002/sendzone',\r\n\t\t\t\t\t\t\t\t// \t\tdata:{\r\n\t\t\t\t\t\t\t\t// \t\t\tzeonname:'房屋合同纠纷'\r\n\t\t\t\t\t\t\t\t// \t\t},\r\n\t\t\t\t\t\t\t\t// \t\theader:{\r\n\t\t\t\t\t\t\t\t// \t\t\t'content-type':'application/x-www-form-urlencoded',\r\n\t\t\t\t\t\t\t\t// \t\t},\r\n\t\t\t\t\t\t\t\t// \t\tmethod:'POST',\r\n\t\t\t\t\t\t\t\t// \t\tsuccess:(res)=>{\r\n\t\t\t\t\t\t\t\t// \t\t\tthis.qid=res.data.id\r\n\t\t\t\t\t\t\t\t// \t\t\tthis.msgList.push({my:false,msg: {type:'text',content:res.data.question},type:-1})\r\n\t\t\t\t\t\t\t\t// \t\t\tthis.msgGo();\r\n\t\t\t\t\t\t\t\t// \t\t\tthis.isasking=1;\r\n\t\t\t\t\t\t\t\t// \t\t},\r\n\t\t\t\t\t\t\t\t// \t\tfail: (res) => {\r\n\t\t\t\t\t\t\t\t// \t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\t\t// \t\t}\r\n\t\t\t\t\t\t\t\t// \t})\r\n\t\t\t\t\t\t\t\tthis.msgLoad = false\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.msgLoad = true\r\n\t\t\t\t\t\t\t\tthis.msgGo()\r\n\t\t\t\t\t\t\t\tif (this.classify_text == '离婚') {\r\n\t\t\t\t\t\t\t\t\tthis.classify_text = '婚姻家庭'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tthis.classify_text == '婚姻家庭' ||\r\n\t\t\t\t\t\t\t\t\tthis.classify_text == '民间借贷' ||\r\n\t\t\t\t\t\t\t\t\tthis.classify_text == '消费者权益保护'\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\t\t\turl: 'http://114.116.12.217:5002/chat',\r\n\t\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\t\tscene: this.classify_text,\r\n\t\t\t\t\t\t\t\t\t\t\ttext: text,\r\n\t\t\t\t\t\t\t\t\t\t\tusername: 'myuser',\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded',\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\t\t\t\t\tif ((res.data.state != 0) & (res.data.text != 'end')) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t// this.qid=res.data.id\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.msgList.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmy: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmsg: { type: 'text', content: res.data.text },\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: -1,\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.msgLoad = false\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.msgGo()\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.isclassify = 0\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\turl: 'http://114.116.12.217:5002/chat',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tscene: this.classify_text,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext: text,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tusername: 'myuser',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'content-type':\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'application/x-www-form-urlencoded',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\turl:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'http://114.116.12.217:8080/demo_war/GetBooks',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser: 'myuser',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\turl:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'http://114.116.12.217:8080/demo_war/getfilename',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser: 'myuser',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttime:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tres.data.books[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tString(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tres.data.books\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.length - 1,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.msgList.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmy: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontent:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'感谢您的回答，律百通已经为您后台生成法律咨询意见书！您本次咨询的意见书密匙是' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.data.code +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t',您可点击首页的下载意见书按钮后扫码下载。\\n\\n您可再次输入一个问题，律百通会再次对您的问题分析。',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: -1,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.msgGo()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfail: e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t;(this.classify_text = ''),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// this.msgGo();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(this.msgLoad = false)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: 'http://114.116.12.217:5002/reset',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t}, 2500)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log('取消发送录音')\r\n\t\t\t}\r\n\t\t\tthis.willStop = false\r\n\t\t\tthis.msgGo()\r\n\t\t},\r\n\r\n\t\t// 切换输入法时移动输入框(按照官方的上推页面的原理应该会自动适应不同的键盘高度-->官方bug)\r\n\t\tgoPag(kh) {\r\n\t\t\tthis.upTowmn(0, 250)\r\n\t\t\tif (this.keyHeight != 0) {\r\n\t\t\t\tif (kh - this.keyHeight > 0) {\r\n\t\t\t\t\tthis.upTowmn(this.keyHeight - kh, 250)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 移动顶部的空盒子\r\n\t\tmsgMove(x, t) {\r\n\t\t\tvar animation = uni.createAnimation({\r\n\t\t\t\tduration: t,\r\n\t\t\t\ttimingFunction: 'linear',\r\n\t\t\t})\r\n\r\n\t\t\tthis.animation = animation\r\n\r\n\t\t\tanimation.height(x).step()\r\n\r\n\t\t\tthis.anData = animation.export()\r\n\t\t},\r\n\t\t// 保持消息体可见\r\n\t\tmsgGo() {\r\n\t\t\tconst query = uni.createSelectorQuery()\r\n\t\t\t// 延时100ms保证是最新的高度\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\t// 获取消息体高度\r\n\t\t\t\tquery\r\n\t\t\t\t\t.select('#okk')\r\n\t\t\t\t\t.boundingClientRect(data => {\r\n\t\t\t\t\t\t// 如果超过scorll高度就滚动scorll\r\n\t\t\t\t\t\tif (data.height - wh > 0) {\r\n\t\t\t\t\t\t\tthis.go = data.height - wh\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// 保证键盘第一次拉起时消息体能保持可见\r\n\t\t\t\t\t\tvar moveY = wh - data.height\r\n\t\t\t\t\t\t// 超出页面则缩回空盒子\r\n\t\t\t\t\t\tif (moveY - mgUpHeight < 0) {\r\n\t\t\t\t\t\t\t// 小于0则视为0\r\n\t\t\t\t\t\t\tif (moveY < 0) {\r\n\t\t\t\t\t\t\t\tthis.msgMove(0, 200)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t// 否则缩回盒子对应的高度\r\n\t\t\t\t\t\t\t\tthis.msgMove(moveY, 200)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.exec()\r\n\t\t\t}, 200)\r\n\t\t},\r\n\t\t// 回答问题的业务逻辑\r\n\t\tanswer(id) {\r\n\t\t\t// 这里应该传入问题的id,模拟就用index代替了\r\n\t\t\tconsole.log(id)\r\n\t\t\t// if(id==2){\r\n\t\t\t// \tuni.navigateTo({\r\n\t\t\t// \t\turl:\"../map/map\"\r\n\t\t\t// \t})\r\n\t\t\t// }\r\n\t\t\tif (id == 0) {\r\n\t\t\t\tthis.classify_text = '婚姻家庭'\r\n\t\t\t\tthis.isclassify = 1\r\n\t\t\t}\r\n\t\t\tif (id == 1) {\r\n\t\t\t\tthis.classify_text = '民间借贷'\r\n\t\t\t\tthis.isclassify = 1\r\n\t\t\t}\r\n\t\t\tif (id == 2) {\r\n\t\t\t\tthis.classify_text = '消费者权益保护'\r\n\t\t\t\tthis.isclassify = 1\r\n\t\t\t}\r\n\t\t\tconsole.log(this.classify_text)\r\n\t\t\tthis.msgList.push({\r\n\t\t\t\tmy: false,\r\n\t\t\t\tmsg: {\r\n\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\tcontent:\r\n\t\t\t\t\t\t'接下来律百通会问您一些问题，请耐心回答哟！在您回复后，我们将开始正式咨询流程。',\r\n\t\t\t\t},\r\n\t\t\t\ttype: -1,\r\n\t\t\t})\r\n\t\t\tthis.msgLoad = false\r\n\t\t\tthis.msgGo()\r\n\t\t},\r\n\t\tsendMsg() {\r\n\t\t\t// 消息为空不做任何操作\r\n\t\t\tif (this.msg == '') {\r\n\t\t\t\treturn 0\r\n\t\t\t}\r\n\t\t\t// 显示消息 msg消息文本,my鉴别是谁发的消息(不能用俩个消息数组循环,否则消息不会穿插)\r\n\t\t\tthis.msgList.push({ msg: { type: 'text', content: this.msg }, my: true })\r\n\t\t\t// 保证消息可见\r\n\t\t\tthis.msgGo()\r\n\t\t\t// 回答问题\r\n\t\t\tthis.msgKf(this.msg)\r\n\t\t\t// 清除消息\r\n\t\t\tthis.msg = ''\r\n\t\t},\r\n\r\n\t\tmsgKf(x) {\r\n\t\t\t// loading\r\n\t\t\tthis.msgLoad = true\r\n\t\t\t// 这里连接服务器获取答案\r\n\t\t\tif (this.isclassify == 0) {\r\n\t\t\t\tconsole.log('ssssssss')\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: 'http://121.36.67.250:1700/api/textClassify2',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tquestion: x,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif (res.statusCode == 200) {\r\n\t\t\t\t\t\t\tthis.msgLoad = false\r\n\t\t\t\t\t\t\tthis.classify_text = res.data.data.kind[0][0]\r\n\t\t\t\t\t\t\tconsole.log('分类结果：', res.data)\r\n\t\t\t\t\t\t\tconsole.log('scence:', this.classify_text)\r\n\t\t\t\t\t\t\tthis.msgList.push({\r\n\t\t\t\t\t\t\t\tmy: false,\r\n\t\t\t\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t\t\tcontent: '您咨询问题的类别是' + this.classify_text,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\ttype: -1,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthis.msgLoad = false\r\n\t\t\t\t\t\t\tthis.msgGo()\r\n\t\t\t\t\t\t\tif (this.classify_text == '离婚') {\r\n\t\t\t\t\t\t\t\tthis.classify_text = '婚姻家庭'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tthis.classify_text == '婚姻家庭' ||\r\n\t\t\t\t\t\t\t\tthis.classify_text == '民间借贷' ||\r\n\t\t\t\t\t\t\t\tthis.classify_text == '消费者权益保护'\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tthis.msgList.push({\r\n\t\t\t\t\t\t\t\t\tmy: false,\r\n\t\t\t\t\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t\t\t\tcontent:\r\n\t\t\t\t\t\t\t\t\t\t\t'接下来律百通会问您一些问题，请耐心回答哟！在您回复后，我们将开始正式咨询流程。',\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\ttype: -1,\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tthis.msgLoad = false\r\n\t\t\t\t\t\t\t\tthis.msgGo()\r\n\t\t\t\t\t\t\t\tthis.isclassify = 1\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.msgList.push({\r\n\t\t\t\t\t\t\t\t\tmy: false,\r\n\t\t\t\t\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t\t\t\tcontent:\r\n\t\t\t\t\t\t\t\t\t\t\t'您的问题律百通暂时回答不了呢，现在律百通只明白\\n婚姻家庭、民间借贷、消费者权益保护三个类别的问题呢。',\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\ttype: -1,\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tthis.msgLoad = false\r\n\t\t\t\t\t\t\t\tthis.msgGo()\r\n\t\t\t\t\t\t\t\tthis.isclassify = 0\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.msgLoad = false\r\n\t\t\t\t\t\t\tthis.msgList.push({\r\n\t\t\t\t\t\t\t\tmy: false,\r\n\t\t\t\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t\t\tcontent:\r\n\t\t\t\t\t\t\t\t\t\t'律百通还在学习中,没能明白您的问题,您点击下方提交反馈与问题,我们会尽快人工处理',\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\ttype: 0,\r\n\t\t\t\t\t\t\t\tquestionList: ['联系我们', '人工客服'],\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthis.msgGo()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\tconsole.log('fail')\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tthis.msgLoad = false\r\n\t\t\t\t\t\tthis.msgList.push({\r\n\t\t\t\t\t\t\tmy: false,\r\n\t\t\t\t\t\t\tmsg:\r\n\t\t\t\t\t\t\t\t'律百通还在学习中,没能明白您的问题,您点击下方提交反馈与问题,我们会尽快人工处理',\r\n\t\t\t\t\t\t\ttype: 0,\r\n\t\t\t\t\t\t\tquestionList: ['联系我们', '人工客服'],\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.msgGo()\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tif (this.isasking == 56454654) {\r\n\t\t\t\t\tthis.isasking = 1\r\n\t\t\t\t\tthis.msgLoad = false\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(this.classify_text)\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl: 'http://114.116.12.217:5002/chat',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tscene: this.classify_text,\r\n\t\t\t\t\t\t\ttext: x,\r\n\t\t\t\t\t\t\tusername: 'myuser',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\tif ((res.data.state != 0) & (res.data.text != 'end')) {\r\n\t\t\t\t\t\t\t\t// this.qid=res.data.id\r\n\t\t\t\t\t\t\t\tthis.msgList.push({\r\n\t\t\t\t\t\t\t\t\tmy: false,\r\n\t\t\t\t\t\t\t\t\tmsg: { type: 'text', content: res.data.text },\r\n\t\t\t\t\t\t\t\t\ttype: -1,\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t// this.msgGo();\r\n\t\t\t\t\t\t\t\tthis.msgLoad = false\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.isasking = 0\r\n\t\t\t\t\t\t\t\tthis.isclassify = 0\r\n\t\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\t\turl: 'http://114.116.12.217:5002/chat',\r\n\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\tscene: this.classify_text,\r\n\t\t\t\t\t\t\t\t\t\ttext: x,\r\n\t\t\t\t\t\t\t\t\t\tusername: 'myuser',\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded',\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\t\t\turl: 'http://114.116.12.217:8080/demo_war/GetBooks',\r\n\t\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\t\tuser: 'myuser',\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\t\t\t\t\turl:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'http://114.116.12.217:8080/demo_war/getfilename',\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser: 'myuser',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttime:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tres.data.books[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tString(res.data.books.length - 1)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\tsuccess: e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.msgList.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmy: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmsg: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontent:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'感谢您的回答，律百通已经为您后台生成法律咨询意见书！您本次咨询的意见书密匙是' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.data.code +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t',您可点击首页的下载意见书按钮后扫码下载。\\n\\n您可再次输入一个问题，律百通会再次对您的问题分析。',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: -1,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.msgGo()\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\tfail: e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\t\tthis.classify_text = ''\r\n\t\t\t\t\t\t\t\t\t// this.msgGo();\r\n\t\t\t\t\t\t\t\t\tthis.msgLoad = false\r\n\t\t\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\t\t\turl: 'http://114.116.12.217/reset',\r\n\t\t\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}, 2500)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 不建议输入框聚焦时操作此动画\r\n\t\tckAdd() {\r\n\t\t\tif (!this.showTow) {\r\n\t\t\t\tthis.upTowmn(-180, 350)\r\n\t\t\t} else {\r\n\t\t\t\tthis.upTowmn(0, 200)\r\n\t\t\t}\r\n\t\t\tthis.showTow = !this.showTow\r\n\t\t},\r\n\t\thideKey() {\r\n\t\t\tuni.hideKeyboard()\r\n\t\t},\r\n\t\t// 拉起/收回附加栏\r\n\t\tupTowmn(x, t) {\r\n\t\t\tvar animation = uni.createAnimation({\r\n\t\t\t\tduration: t,\r\n\t\t\t\ttimingFunction: 'ease',\r\n\t\t\t})\r\n\r\n\t\t\tthis.animation = animation\r\n\r\n\t\t\tanimation.translateY(x).step()\r\n\r\n\t\t\tthis.animationData = animation.export()\r\n\t\t},\r\n\t},\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import '@/static/css/style.scss';\r\n.bottom-dh-char {\r\n\tbackground-color: #f9f9f9;\r\n\twidth: 750rpx;\r\n\theight: 110rpx;\r\n}\r\n.center-box {\r\n\twidth: 720rpx;\r\n\tpadding-left: 25rpx;\r\n}\r\n.hui-box {\r\n\twidth: 750rpx;\r\n\theight: 100%;\r\n}\r\n.dh-input {\r\n\twidth: 68%;\r\n\theight: 68rpx;\r\n\tborder-radius: 30rpx;\r\n\tpadding-left: 15rpx;\r\n\tbackground-color: #ffffff;\r\n}\r\n.box-normal {\r\n\twidth: 750rpx;\r\n\theight: 180px;\r\n\tbackground-color: #ffffff;\r\n}\r\n.tb-text view {\r\n\tfont-size: 150rpx;\r\n}\r\n.tb-text text {\r\n\tfont-size: 30rpx;\r\n\tcolor: #737373;\r\n}\r\n.chat-img {\r\n\tborder-radius: 50%;\r\n\twidth: 100rpx;\r\n\theight: 100rpx;\r\n\tbackground-color: #f7f7f7;\r\n}\r\n\r\n.padding-chat {\r\n\tpadding: 18rpx 21rpx;\r\n}\r\n.tb-nv {\r\n\twidth: 50rpx;\r\n\theight: 50rpx;\r\n}\r\n</style>\n","import mod from \"-!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./zixun.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./zixun.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1656060569866\n      var cssReload = require(\"C:/Users/万青尧/Desktop/2022互联网+/2021互联网+/前端/HBuilderX.3.1.12.20210428.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}